---
title: commit-conventions
---

# 提交规范

本文件定义了 Claude Code 在提交代码时需要遵循的规范。

## 提交前必须执行的步骤

在每次 `git commit` 之前，Claude Code 必须：

### 1. 记录用户需求

记录本次交流中用户的原始需求或指令。

### 2. 记录改动说明

详细记录所有改动，包括：

#### 新增文件
- 文件路径
- 新增原因
- 主要内容概述

#### 修改文件
- 文件路径
- 修改的具体部分（使用行号或描述）
- 修改前后的差异
- 修改原因

#### 删除文件
- 文件路径
- 删除原因

### 3. 生成结构化提交信息

提交信息格式：

```
<type>: <简短描述>

## 用户需求
<用户的原始需求或指令>

## 改动详情
### 新增文件
- <文件路径>: <原因>
  - <主要内容概述>

### 修改文件
- <文件路径>: <修改原因>
  - 行 X-Y: <具体修改内容>

### 删除文件
- <文件路径>: <删除原因>

## 影响范围
<受影响的模块或功能>
```

### 提交类型 (type)

- `feat`: 新功能
- `fix`: 修复 Bug
- `docs`: 文档更新
- `style`: 代码格式调整（不影响功能）
- `refactor`: 重构（既不是新功能也不是修复）
- `chore`: 构建/工具链更新
- `perf`: 性能优化
- `test`: 测试相关
- `revert`: 回滚提交

## 示例

```
docs: 更新配置指南页面

## 用户需求
用户要求：好的，这一部分的内容增加到文档的页面中合适的位置或者新页面

## 改动详情
### 新增文件
- docs/guide/configuration.md: 创建配置指南页面
  - 包含权限模式、命令行参数、工具权限管理等完整内容
  - 位置：入门指南部分

### 修改文件
- docs/.vitepress/config.ts: 添加配置页面到导航
  - 行 13: 添加"配置"链接到顶部导航
  - 行 24: 添加"配置指南"到侧边栏

### 删除文件
- 无

## 影响范围
导航结构、文档内容
```

## 自动化记录

Claude Code 应该在每次操作时实时记录改动，建议使用以下文件：

1. **.claude/session-changes.md** - 实时记录当前会话的所有改动
2. **CHANGELOG.md** - 累积的变更历史
3. **Git 提交信息** - 每次提交的结构化信息

## 注意事项

- 提交信息必须使用中文（针对此项目）
- 改动说明要足够详细，便于日后回顾
- 记录要准确，避免遗漏任何文件变更
- 多个相关改动应该放在一次提交中
